<!-- Copyright 2016 Capital One Services, LLC and Bitwise, Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
 http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License. -->
 
<!doctype html>
<html>
<head>
	<title>Aggregate Operation Editor</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
</head>
<body>
<p><span class="header">Aggregate Operation Editor</span></p>

<p><span><b>Operation editor</b>&nbsp;for the Aggregate component can be viewed by clicking the Edit button next to Aggregate property on General tab. Input fields arriving from the input port are available in the input fields grid on the left.</span></p>
<p><span>The '<b>Operation Control</b>' allows users to add multiple aggregation operations. Each operation is displayed in the window below 'Operation Control'.</span></p>
<p><span>Each operation has input fields and output fields.</span></p>
<p><span><b>Map Fields</b> table in the bottom section allows user to specify pass-through and map fields.</span></p>

<p><img alt="Aggregate operation editor" src="../images/Aggregate_Mapping_View1.png" width = "100%" /></p>
<p class="center"><span>Fig 1</span></p>

<p><span><b>Input Fields Grid</b></span></p>
<p><span>The input fields grid list all the fields available on the input port of the aggregate component. This list is populated automatically.</span></p>
<p><span><b>Operation Window</b></span></p>
<p><span>The operation window defines one aggregation operation. The aggregation operation has following fields (mandatory fields are marked in <b>bold</b>):</span>
<ul>
	<li><span><b>Operation input fields</b>: These fields are passed as input to the operation. User can drag the required fields from the available fields in 'Input Fields' grid on the left.</span></li>
	<li><span><b>Operation output fields</b>: These fields are the output of the operation. User has to manually add / edit this list based on the output of the operation.
	<br />
	These fields are automatically added to the 'Output Fields' grid on the right. The 'Output Fields' grid contains the combined output of all the operations along with the pass-through and map fields.</span></li>
	<li><span><b>Operation Class</b>: The fully qualified Java class name which implements the aggregation operation. User can specify custom aggregate operation class, or use one of the standard operation classes from the drop-down provided. Check <a href="Aggregate_Operation_Class.html">Aggregate Operation Class</a> page for more details.</span></li>
	<li><span>Operation properties: User can pass additional properties to the operation from the properties grid in the 'Operation Class' window (ref Fig 2). These property values are available for use in the Java class.</span></li>
	<li><span>Parameter name: The entire operation can be parameterized. The parameter name for this operation should be specified here. The parameter value should be the entire xml tag representing the operation in the target xml.</span></li>
</ul>

<p class="center"><img alt="Fig 2" src="../images/Aggregate_Operation_Class_Window.png" /></p>
<p class="center"><span>Fig 2</span></p>

<p><span><b>Map Fields</b></span></p>
<span>User can drag and drop single or multiple fields in the mapping grid. Alternatively, user can also use the 'add', 'delete' buttons above the map fields grid to add or delete fields manually. The fields that are passed <i>as-is</i> in the output are pass-through fields. Whereas, fields renamed in the output are map fields.</span></p>

<p><span><b>Output Fields</b></span></p>
<p><span>The output fields grid contains the operation output fields of all the operations as well pass-through and map fields. The operation output fields, pass-through fields and map fields are automatically added in the output fields grid.</span></p>
<p><span>User can also opt to pull the schema from the schema tab (i.e. the out port of aggregate component). The current list of fields in output fields gird is overwritten with the fields in schema tab.</span></p>
<p><span>If there are new fields schema tab that are not available in any of the operation output or map fields, a new entry is added in map fields grid with the new field name as target and a blank source field.</span></p>
<p><span>If the fields currently present in output fields list, which either came from operation output fields or from pass-through or map fields, are not present in the schema tab, those fields are deleted from the output fields list. Their corresponding entries in either operation output fields grid or map fields grid are also deleted.</span></p>
</body>
</html>